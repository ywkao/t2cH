#!/bin/bash
#ref of command awk: https://ubuntuforums.org/showthread.php?t=840054
set -e

INPUTDIR="/wk_cms2/youying/public/2017_94X_3_1_X_and_3_2_0"
OUTPUTDIR="/home/ykao/legacy/CMSSW_9_4_10/src/t2cH/plots"

./clear
./mkplotdir

for file in `cat ListRootFiles | grep -v "#"`
do
    #echo $file | awk -F "." '{printf("%s/%s.root", "'$INPUTDIR'", $1)} {printf("%s/%s/hist_%s.root", "'$OUTPUTDIR'", $1, $1)} {printf("%s/%s", "'$OUTPUTDIR'", $1)}'
    echo $file | awk -F "." '{printf("%s/%s.root %s/%s/hist_%s.root %s/%s", "'$INPUTDIR'", $1, "'$OUTPUTDIR'", $1, $1, "'$OUTPUTDIR'", $1)}' | xargs -n3 ./bin/runner
    #./bin/runner "` echo $file | awk -F "." '{printf("%s/%s.root %s/%s/hist_%s.root %s/%s", "'$INPUTDIR'", $1, "'$OUTPUTDIR'", $1, $1, "'$OUTPUTDIR'", $1)}'`"
    #echo "` echo $file | awk -F "." '{printf("%s/%s.root %s/%s/hist_%s.root %s/%s", "'$INPUTDIR'", $1, "'$OUTPUTDIR'", $1, $1, "'$OUTPUTDIR'", $1)}'`"
    # input_file / output_file / output_dir
done

